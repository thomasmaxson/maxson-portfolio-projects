(()=>{var e,a={542:(e,a,t)=>{"use strict";const l=window.wp.blocks,o=JSON.parse('{"u2":"maxson-portfolio-projects/project-carousel"}'),n=window.React,r=window.wp.i18n,i=window.wp.blockEditor,s=window.wp.components,c=window.wp.element,m=window.wp.data,u=window.wp.notices;var d=t(967),p=t.n(d);const g=window.lodash,v=window.wp.blob;function b({url:e,alt:a,id:t,isSelected:l,onSelect:o,onRemove:i,onMoveForward:c,onMoveBackward:m,isFirstItem:u,isLastItem:d,imageCount:g}){const b=()=>{l||o()},_=p()({"is-selected":l,"is-transient":(0,v.isBlobURL)(e)});return(0,n.createElement)("figure",{className:_},l&&(0,n.createElement)(n.Fragment,null,g>1&&(0,n.createElement)("div",{className:"block-carousel-slide--action-reorder"},(0,n.createElement)(s.Button,{label:u?void 0:(0,r._x)("Move Image Backward","Carousel reorder help text","maxson"),icon:"arrow-left",className:"block-carousel-slide--action-move-backward",onClick:u?void 0:m,isSmall:!0,"aria-disabled":u,disabled:!l}),(0,n.createElement)(s.Button,{label:d?void 0:(0,r._x)("Move Image Forward","Carousel reorder help text","maxson"),className:"block-carousel-slide--action-move-forward",onClick:d?void 0:c,icon:"arrow-right",isSmall:!0,"aria-disabled":d,disabled:!l})),(0,n.createElement)("div",{className:"block-carousel-slide--action-remove"},(0,n.createElement)(s.Button,{onClick:i,className:"blocks-gallery-item__remove",label:(0,r.__)("Remove Image"),isSmall:!0,isDestructive:!0,icon:"no-alt"}))),(0,n.createElement)("img",{src:e,alt:a,className:"block-carousel-slide--image",tabIndex:"0","data-id":t,onClick:b,onKeyDown:b}))}const _=[{value:"fade",label:(0,r._x)("Fade","Carousel transition type","maxson")},{value:"scroll",label:(0,r._x)("Scroll","Carousel transition type","maxson")}],w=["image"];(0,l.registerBlockType)(o.u2,{edit:function({attributes:e,isSelected:a,noticeUI:t,setAttributes:l}){const{images:o,autoplay:d,pauseOnAction:v,pauseOnHover:f,speed:h,effect:E,showNavigation:k,showPagination:C,imageResolution:x,imageCrop:y}=e;let[S,O]=(0,c.useState)(null);const{createSuccessNotice:N,createErrorNotice:P}=(0,m.useDispatch)(u.store),I=(0,i.useBlockProps)({className:p()({"is-cropped":y})}),B=wp.data.select("core/block-editor").getSettings().imageSizes.map((({name:e,slug:a})=>({value:a,label:e}))),T=e=>{const a=e.map((e=>((e,a="project_large")=>{const t=Object.fromEntries(Object.entries(null!=e?e:{}).filter((([e])=>["id","alt","caption","title"].includes(e))));t.url=e?.sizes?.[a]?.url||e?.media_details?.sizes?.[a]?.source_url||e.url;const l=e?.imageSize?.full?.url||e?.media_details?.imageSize?.full?.source_url;return l&&(t.urlFull=l),t})(e,x)));l({ids:e.map((e=>e.id)),images:a})},z=e=>()=>{S!==e&&(S=e)},A=a=>()=>{const t=(0,g.filter)(e.images,((e,t)=>a!==t));S=null,l({images:t})},F=(e,a)=>{let t=[...o];t.splice(a,1,o[e]),t.splice(e,1,o[a]),O(a),l({images:t})};function R(){l({images:[]}),N((0,r.__)("All carousel images removed","maxson"),{id:"maxson-portfolio-carousel-images-removed",type:"snackbar"})}return 0===o.length?(0,n.createElement)("div",{...I},(0,n.createElement)(n.Fragment,null,(0,n.createElement)(i.MediaPlaceholder,{icon:"format-gallery",labels:{title:(0,r.__)("Carousel","maxson")},onSelect:T,accept:"image/*",allowedTypes:w,multiple:!0,notices:t}))):(0,n.createElement)(n.Fragment,null,t,(0,n.createElement)(i.BlockControls,null,!!o.length&&(0,n.createElement)(s.ToolbarGroup,null,(0,n.createElement)(s.ToolbarItem,null,(()=>(0,n.createElement)(i.MediaUploadCheck,null,(0,n.createElement)(i.MediaUpload,{onSelect:T,allowedTypes:w,multiple:!0,gallery:!0,value:o.map((e=>e.id)),render:({open:e})=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(s.Button,{onClick:e,className:"components-toolbar__control",label:(0,r.__)("Add/Edit Carousel Images","maxson"),isSmall:!0,icon:"edit"}),(0,n.createElement)(s.Button,{onClick:R,className:"components-toolbar__control",label:(0,r.__)("Clear Carousel Images"),icon:"trash"}))})))))),(0,n.createElement)(i.InspectorControls,null,(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Settings","maxson"),initialOpen:!0},(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Autoplay","maxson"),checked:!!d,onChange:e=>{l({autoplay:e})}})),d?(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Pause on action","maxson"),checked:!!v,onChange:e=>{l({pauseOnAction:e})}})):"",d?(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Pause on hover","maxson"),checked:!!f,onChange:e=>{l({pauseOnHover:e})}})):"",(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.TextControl,{label:(0,r.__)("Speed","maxson"),type:"number",min:"100",max:"500",value:h,onChange:e=>{l({speed:e})}})),(0,n.createElement)(s.PanelRow,null,(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Effect","maxson"),value:E,onChange:e=>{l({effect:e})},options:_}))),(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Controls","maxson"),initialOpen:!1},(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Show Navigation","maxson"),checked:!!k,onChange:e=>{l({showNavigation:e})}}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Show Pagination","maxson"),checked:!!C,onChange:e=>{l({showPagination:e})}})),B?.length>0&&(0,n.createElement)(s.PanelBody,{title:(0,r.__)("Image Settings","maxson"),initialOpen:!1},(0,n.createElement)(s.SelectControl,{label:(0,r.__)("Image Resolution","maxson"),help:(0,r.__)("Select the size of the source images.","maxson"),value:x,options:B,onChange:e=>{(async e=>{l({imageResolution:e});try{const a=await(async(e,a="project_large")=>await Promise.all(e.map((async e=>{const t=parseInt(e.id);let l=await wp.data.select("core").getMedia(t);l||(l=e);const o=(0,g.pick)(l,["id","link"]);o.alt=(0,g.get)(l,["alt_text"])||(0,g.get)(l,["alt"])||void 0,o.caption=(0,g.get)(l,["caption"])||(0,g.get)(l,["caption","raw"])||void 0,o.url=(0,g.get)(l,["media_details","sizes",a,"source_url"])||(0,g.get)(l,["sizes",a,"url"])||l.source_url;const n=l?.imageSize?.full?.url||l?.media_details?.imageSize?.full?.source_url;n&&(o.urlFull=n);const r=l?.imageSize?.thumbnail?.url||l?.media_details?.imageSize?.thumbnail?.source_url;return r&&(o.urlThumb=r),o}))))(o,e),t=B.find((a=>a.value===e));l({images:a}),N((0,r.sprintf)((0,r.__)("All carousel image sizes updated to: %s","maxson"),t.label),{id:"maxson-portfolio-carousel-attributes-imageSize",type:"snackbar"})}catch(e){console.error(e)}})(e)}}),(0,n.createElement)(s.ToggleControl,{label:(0,r.__)("Crop Image","maxson"),help:e=>e?(0,r.__)("Images are cropped to align.","maxson"):(0,r.__)("Images are not cropped.","maxson"),checked:!!y,onChange:e=>{l({imageCrop:e})}}))),(0,n.createElement)("div",{...I},o.map(((e,t)=>(0,n.createElement)("div",{className:"block-carousel-slide",key:e.id||e.url},(0,n.createElement)(b,{url:e.url,alt:e.alt,id:e.id,caption:e.caption,onSelect:z(t),onRemove:A(t),isSelected:a,setAttributes:e=>setImageAttributes(t,e),onMoveBackward:()=>{var e;0!==(e=t)&&F(e,e-1)},onMoveForward:()=>{var e;(e=t)!==o.length-1&&F(e,e+1)},isFirstItem:0===t,isLastItem:t+1===o.length,imageCount:o.length||0}))))))},save:function({attributes:e}){const{images:a,autoplay:t,pauseOnAction:l,pauseOnHover:o,speed:r,effect:s,showNavigation:c,showPagination:m,imageCrop:u}=e;let d=i.useBlockProps.save({className:u?"is-cropped":"","data-autoplay":t,"data-speed":r,"data-effect":s,"data-arrows":c,"data-dots":m});return t&&l&&(d={...d,"data-pauseOnAction":o}),t&&o&&(d={...d,"data-pauseOnHover":o}),(0,n.createElement)("ul",{...d},a.map((e=>{const a=(0,n.createElement)("img",{src:e.url,className:e.id?`wp-image-${e.id}`:null,alt:e.alt,title:e.title,"data-url-full":e.urFull,"data-url":e.url,"data-id":e.id,"data-link":e.link});return(0,n.createElement)("li",{key:e.id||e.url,className:"carousel-slide"},(0,n.createElement)("figure",null,a,e.caption&&e.caption.length>0&&(0,n.createElement)("figcaption",null,e.caption)))})))}})},967:(e,a)=>{var t;!function(){"use strict";var l={}.hasOwnProperty;function o(){for(var e="",a=0;a<arguments.length;a++){var t=arguments[a];t&&(e=r(e,n(t)))}return e}function n(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var a="";for(var t in e)l.call(e,t)&&e[t]&&(a=r(a,t));return a}function r(e,a){return a?e?e+" "+a:e+a:e}e.exports?(o.default=o,e.exports=o):void 0===(t=function(){return o}.apply(a,[]))||(e.exports=t)}()}},t={};function l(e){var o=t[e];if(void 0!==o)return o.exports;var n=t[e]={exports:{}};return a[e](n,n.exports,l),n.exports}l.m=a,e=[],l.O=(a,t,o,n)=>{if(!t){var r=1/0;for(m=0;m<e.length;m++){for(var[t,o,n]=e[m],i=!0,s=0;s<t.length;s++)(!1&n||r>=n)&&Object.keys(l.O).every((e=>l.O[e](t[s])))?t.splice(s--,1):(i=!1,n<r&&(r=n));if(i){e.splice(m--,1);var c=o();void 0!==c&&(a=c)}}return a}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[t,o,n]},l.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return l.d(a,{a}),a},l.d=(e,a)=>{for(var t in a)l.o(a,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},l.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={670:0,448:0};l.O.j=a=>0===e[a];var a=(a,t)=>{var o,n,[r,i,s]=t,c=0;if(r.some((a=>0!==e[a]))){for(o in i)l.o(i,o)&&(l.m[o]=i[o]);if(s)var m=s(l)}for(a&&a(t);c<r.length;c++)n=r[c],l.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return l.O(m)},t=globalThis.webpackChunkarchive=globalThis.webpackChunkarchive||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var o=l.O(void 0,[448],(()=>l(542)));o=l.O(o)})();